{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block body %}
	<div class="bg-light p-3">
		<h1>Votre panier</h1>
	</div>

	{% if items | length > 0 %}
		<table class="table">
			<thead>
				<tr>
					<th>Titre de l'annonce</th>
					<th>Ville</th>
					<th>Prix</th>
					<th>Nombre de nuits</th>
					<th></th>
				</tr>
			</thead>
			<tbody>

				{% for item in items %}
					<tr>
						<td>{{item.ad.title}}</td>
						<td>{{item.ad.city}}</td>
						<td>{{item.ad.price}}
							&euro;</td>
						<td>{{item.quantity}}</td>
						<td>
							{# {% if is_granted('IS_AUTHENTICATED_FULLY') %} #}
							{# 
														{% set users = item.ad.bookings.snapshot %}
														{% set bookings = app.user.bookings.owner.bookings.snapshot %} #}

							{# <pre>
																																																																																											{{ dump(book) }}
																																																																																											</pre> #}


							{# <a href="{{ path('booking_edit', {'id' : book.0.reservation.id})}}" class="btn btn-primary btn-sm">
																																				<i class="fas fa-edit"></i>
																																			</a> #}

								<a title="supprimer du panier" href="{{path('cart_remove', {'id': item.ad.id}) }}" class="btn btn-danger btn-sm"> <i class="fas fa-trash"></i>
							</a>
						</td>
					</tr>
				</td>
			</tbody>
		</tr>
	{% endfor %}


</tbody>
<tfoot>
	<tr>
		<td colspan="3" class="text-right">Total :
		</td>
		<td>
			{{ total }}
			&euro;
		</td>
		<td></td>
	</tr>
</tfoot></table>{% else %}<p>Surprise, c'est vide !</p>{% endif %}<pre>
	{{ dump(items) }}
</pre>{% endblock %}
